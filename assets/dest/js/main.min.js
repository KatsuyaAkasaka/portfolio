"use strict";var svg,simulation,node,link,w=$("#svgArea").width(),h=.5*w,centerSVGX=320,centerSVGY=160,nodeData=[],linkData=[],nodeSize=40,maxPow=3;function makeData(){[{name:"icon",pow:2},{name:"js",pow:5},{name:"nodejs",pow:5},{name:"unity",pow:3},{name:"rails",pow:1.5},{name:"cpp",pow:2},{name:"docker",pow:4}].forEach(function(e,t){var n={id:t,path:e.name,pow:e.pow,size:nodeSize*e.pow/maxPow};nodeData.push(n)}),nodeData.forEach(function(e){0!=e.id&&linkData.push({source:0,target:e.id})})}function makeElement(){link=svg.selectAll("line").data(linkData).enter().append("line").attr("stroke","#ccc").attr("stroke-width",1),node=svg.selectAll("circle").data(nodeData).enter().append("image").attr("xlink:href",function(e){return"images/".concat(e.path,".png")}).attr("width",function(e){return e.size}).attr("height",function(e){return e.size}).call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended)),simulation=d3.forceSimulation().force("link",d3.forceLink().distance(100).strength(.01).iterations(40)).force("collide",d3.forceCollide().radius(function(e){return e.r}).strength(-100).iterations(40)).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(centerSVGX,centerSVGY))}function applyElement(){simulation.velocityDecay(.2),simulation.nodes(nodeData).on("tick",ticked),simulation.force("link").links(linkData).id(function(e){return e.index})}function ticked(){node.attr("x",function(e){return e.x-e.size/2}).attr("y",function(e){return e.y-e.size/2}),link.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y});var e=simulation.nodes()[0];e.fx=centerSVGX,e.fy=centerSVGY}function dragstarted(e){d3.event.active||simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function dragged(e){e.fx=d3.event.x,e.fy=d3.event.y}function dragended(e){d3.event.active||simulation.alphaTarget(0),e.fx=null,e.fy=null}function createMap(){svg=d3.select("#svgArea"),console.log(svg),makeData(),makeElement(),applyElement()}!function(a){var e=a(window),t=a("body"),n=a("#main");breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),e.on("load",function(){window.setTimeout(function(){t.removeClass("is-preload")},100)});var i=a("#nav");if(0<i.length){n.scrollex({mode:"top",enter:function(){i.addClass("alt")},leave:function(){i.removeClass("alt")}});var r=i.find("a");r.scrolly({speed:1e3,offset:function(){return i.height()}}).on("click",function(){var e=a(this);"#"==e.attr("href").charAt(0)&&(r.removeClass("active").removeClass("active-locked"),e.addClass("active").addClass("active-locked"))}).each(function(){var e=a(this),t=e.attr("href"),n=a(t);n.length<1||n.scrollex({mode:"middle",initialize:function(){browser.canUse("transition")&&n.addClass("inactive")},enter:function(){n.removeClass("inactive"),0==r.filter(".active-locked").length?(r.removeClass("active"),e.addClass("active")):e.hasClass("active-locked")&&e.removeClass("active-locked")}})})}a(".scrolly").scrolly({speed:1e3}),createMap()}(jQuery);